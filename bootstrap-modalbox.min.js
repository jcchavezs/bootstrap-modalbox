/* ===========================================================
 * bootstrap-modalbox.js v0.2
 * ===========================================================
 * Copyright 2015 José Carlos Chávez <jcchavezs@gmail.com>
 * ========================================================== */
!function(a){a.fn.modalmanager.defaults.resize=!0,a.fn.extend({modalbox:function(o){this.each(function(e,t){a(t).on("click",function(e){return e.preventDefault(),a.modalbox(o,t),!1})})}}),a.modalbox=function(o,e){o=a.extend({},a.modalbox.defaults,o);var t;switch(o.hasOwnProperty("title")||void 0===typeof e||(o.title=e.title),o.hasOwnProperty("source")||void 0===typeof e||(o.source=e.href),0===a("#"+o.id).length?(t=a("<div />",{id:o.id,"class":"modal fade modalbox-"+o.type,tabindex:-1}),o.hasOwnProperty("dataWidth")&&t.attr("data-width",o.dataWidth),a("body",o.target).append(t),t.prepend('<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h3 class="modal-title">'+(o.title?o.title:"&nbsp;")+"</h3></div>"),t.append('<div class="modal-body"></div>')):(t=a("#"+o.id,o.target),o.cache&&(t.find(".modal-header h3").html(o.title),t.find(".modal-body").empty(),t.find(".modal-footer").remove())),o.type){case"ajax":a("body").modalmanager("loading"),t.find(".modal-body").load(o.source,function(){t.modal(o),o.hasOwnProperty("onShow")&&a.modalbox.callback(o.onShow,o)});break;case"iframe":var d;0===a("iframe#"+o.id+"-iframe").length?(d=a("<iframe />",{name:o.id+"-iframe",src:o.source,height:"100%",width:"100%",frameborder:0}),t.find(".modal-body").append(d)):d=a("iframe#"+o.id+"-iframe"),t.modal(o);var n=d.get(0);o.hasOwnProperty("onShow")&&(navigator.userAgent.indexOf("MSIE")>-1&&!window.opera?n.onreadystatechange=function(){"complete"===n.readyState&&a.modalbox.callback(o.onShow,o)}:n.onload=function(){a.modalbox.callback(o.onShow,o)});break;case"html":t.modal(o),t.find(".modal-body").html(o.source),o.hasOwnProperty("onShow")&&a.modalbox.callback(o.onShow,o);break;case"inline":t.modal(o),t.find(".modal-body").append(a(o.source).attr("id",o.id+o.source.replace("#","-"))),o.hasOwnProperty("onShow")&&a.modalbox.callback(o.onShow,o)}o.buttons&&o.buttons.length>0&&(t.append('<div class="modal-footer"></div>'),a.each(o.buttons,function(e,n){if("string"==typeof n)switch(n){case"ok":case"yes":n={type:"button","class":"btn btn-primary",text:a.modalbox.locale[n]};break;case"cancel":case"no":n={type:"button","class":"btn",text:a.modalbox.locale[n],"data-dismiss":"modal"};break;case"close":n={type:"button","class":"btn",text:a.modalbox.locale[n],"data-dismiss":"modal"};break;case"save":case"submit":n={type:"button","class":"btn btn-primary",text:o.buttonSubmitLabel?o.buttonSubmitLabel:a.modalbox.locale[n],on:{click:function(){switch(o.type){case"iframe":d.contents().find("form:first").submit();break;default:t.find(".modal-body form:first").submit()}}}}}t.find(".modal-footer").append(a("<button />",n))})),o.hasOwnProperty("onClose")&&a("#"+o.id).on("hidden",function(){a.modalbox.callback(o.onClose,o)}),t.modal("show")},a.modalbox.uniqid=function(){return parseInt(1e6*Math.random())},a.modalbox.callback=function(a,o){switch(typeof a){case"function":return a(o);case"string":return window[a](o)}},a.modalbox.defaults={id:"modalbox-"+a.modalbox.uniqid(),resize:!0,target:window.document,type:"inline",buttonSubmitLabel:!1,cache:!0},a.modalbox.locale={yes:"Yes",no:"No",ok:"Ok",cancel:"Cancel",close:"Close",submit:"Submit",save:"Save"},a.fn.modal.defaults.spinner=a.fn.modalmanager.defaults.spinner='<div class="loading-spinner" style="width: 200px; margin-left: -100px;"><div class="progress progress-striped active"><div class="progress-bar" style="width: 100%;"></div></div></div>',a(document).ready(function(){a("[data-toggle=modalbox]").each(function(o,e){var t=jQuery.parseJSON(a(e).attr("data-modalbox-settings"));a(e).modalbox(t)})})}(jQuery);
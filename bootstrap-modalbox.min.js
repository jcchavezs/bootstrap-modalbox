/* ===========================================================
 * bootstrap-modalbox.js v0.4
 * ===========================================================
 * Copyright 2015 José Carlos Chávez <jcchavezs@gmail.com>
 * ========================================================== */

!function(a){a.fn.modalmanager.defaults.resize=!0,a.fn.extend({modalbox:function(e){this.each(function(t,o){a(o).on("click",function(t){return t.preventDefault(),a.modalbox(e,o),!1})})}}),a.modalbox=function(e,t){e=a.extend({},a.modalbox.defaults,e);var o;switch(e.hasOwnProperty("title")||void 0===typeof t||(e.title=t.title),e.hasOwnProperty("source")||void 0===typeof t||(e.source=t.href),0===a("#"+e.id).length?(o=a("<div />",{id:e.id,"class":"modal fade modalbox-"+e.type,tabindex:-1}),e.hasOwnProperty("dataWidth")&&o.attr("data-width",e.dataWidth),a("body",e.target).append(o),o.prepend('<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h3 class="modal-title">'+(e.title?e.title:"&nbsp;")+"</h3></div>"),o.append('<div class="modal-body"></div>')):(o=a("#"+e.id,e.target),e.cache&&(o.find(".modal-header h3").html(e.title),o.find(".modal-body").empty(),o.find(".modal-footer").remove())),e.hasOwnProperty("beforeShow")&&a.modalbox.callback(e.beforeShow,o.get(0),[e]),e.type){case"ajax":a("body").modalmanager("loading"),o.find(".modal-body").load(e.source,function(){o.modal(e),e.hasOwnProperty("afterShow")&&a.modalbox.callback(e.afterShow,o.get(0),[e])});break;case"iframe":var d;0===a("iframe#"+e.id+"-iframe").length?(d=a("<iframe />",{name:e.id+"-iframe",src:e.source,height:e.hasOwnProperty("dataHeight")?e.dataHeight:"100%",width:"100%",frameborder:0}),o.find(".modal-body").append(d)):d=a("iframe#"+e.id+"-iframe"),o.modal(e);var n=d.get(0);e.hasOwnProperty("afterShow")&&(navigator.userAgent.indexOf("MSIE")>-1&&!window.opera?n.onreadystatechange=function(){"complete"===n.readyState&&a.modalbox.callback(e.afterShow,o.get(0),[e])}:n.onload=function(){a.modalbox.callback(e.afterShow,o.get(0),[e])});break;case"html":o.modal(e),o.find(".modal-body").html(e.source),e.hasOwnProperty("afterShow")&&a.modalbox.callback(e.afterShow,o.get(0),[e]);break;case"inline":o.modal(e),o.find(".modal-body").append(a(e.source).attr("id",e.id+e.source.replace("#","-"))),e.hasOwnProperty("afterShow")&&a.modalbox.callback(e.afterShow,o.get(0),[e])}e.buttons&&e.buttons.length>0&&(o.append('<div class="modal-footer"></div>'),a.each(e.buttons,function(t,n){if("string"==typeof n)switch(n){case"ok":case"yes":n={type:"button","class":"btn btn-primary",text:a.modalbox.locale[n]};break;case"cancel":case"no":n={type:"button","class":"btn",text:a.modalbox.locale[n],"data-dismiss":"modal"};break;case"close":n={type:"button","class":"btn",text:a.modalbox.locale[n],"data-dismiss":"modal"};break;case"save":case"submit":n={type:"button","class":"btn btn-primary",text:e.buttonSubmitLabel?e.buttonSubmitLabel:a.modalbox.locale[n],on:{click:function(){var t,n;switch(e.type){case"iframe":t=d.contents().find("form:first");break;default:t=o.find(".modal-body form:first")}t.get(0).hasOwnProperty("submit")&&console.log("[bootstrap-modalbox] The form has a property called 'submit' which does not allow to submit the form."),n=t.find("[type=submit]:first"),0===n.length&&(n=a("<button />",{text:"Submit",type:"submit","class":"hidden"}).appendTo(t)),n.trigger("click")}}}}o.find(".modal-footer").append(a("<button />",n))})),e.hasOwnProperty("afterClose")&&o.on("hidden",function(){a.modalbox.callback(e.afterClose,o.get(0),[e])}),o.modal("show")},a.modalbox.uniqid=function(){return parseInt(1e6*Math.random())},a.modalbox.callback=function(a,e,t){switch(typeof a){case"function":return a.apply(e,t);case"string":return window[a].apply(e,t)}},a.modalbox.defaults={id:"modalbox-"+a.modalbox.uniqid(),resize:!0,target:window.document,type:"inline",buttonSubmitLabel:!1,cache:!0},a.modalbox.locale={yes:"Yes",no:"No",ok:"Ok",cancel:"Cancel",close:"Close",submit:"Submit",save:"Save"},a.fn.modal.defaults.spinner=a.fn.modalmanager.defaults.spinner='<div class="loading-spinner" style="width: 200px; margin-left: -100px;"><div class="progress progress-striped active"><div class="progress-bar" style="width: 100%;"></div></div></div>',a(document).ready(function(){a("[data-toggle=modalbox]").each(function(e,t){var o=jQuery.parseJSON(a(t).attr("data-modalbox-settings"));a(t).modalbox(o)})})}(jQuery);